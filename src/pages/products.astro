---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/layout/Header';
import Footer from '../components/layout/Footer';
import FeatureCardLarge from '../components/sections/FeatureCardLarge';
import TechSpecCard from '../components/sections/TechSpecCard';
import CodeBlock from '../components/sections/CodeBlock';
import ComparisonTable from '../components/sections/ComparisonTable';
import '../styles/design-system.css';
import '../styles/animations.css';

const BASE_URL = import.meta.env.BASE_URL || "";

const features = [
  {
    icon: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"/><path d="M3 5v14a2 2 0 0 0 2 2h16v-5"/><path d="M18 12a2 2 0 0 0 0 4h4v-4Z"/></svg>',
    title: 'Unified Dashboard',
    description: 'Single pane of glass for all security operations. Real-time visibility across endpoints, cloud, network, and identity.',
    image: 'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=600&h=400&fit=crop',
    features: ['Real-time threat feed', 'Custom widgets', 'Advanced filtering'],
    size: 'large' as const
  },
  {
    icon: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6M5.6 5.6l4.2 4.2m4.2 4.2l4.2 4.2M1 12h6m6 0h6M5.6 18.4l4.2-4.2m4.2-4.2l4.2-4.2"/></svg>',
    title: 'AI-Powered Detection',
    description: 'Machine learning models trained on 30B+ daily threat signals to detect zero-day attacks.',
    image: 'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=600&h=400&fit=crop',
    features: ['Behavioral analysis', 'Anomaly detection', 'Threat prediction']
  },
  {
    icon: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>',
    title: 'Automated Response',
    description: 'Pre-configured playbooks automate incident response, reducing MTTR by 85%.',
    image: 'https://images.unsplash.com/photo-1518770660439-4636190af475?w=600&h=400&fit=crop',
    features: ['Custom playbooks', 'Auto-remediation', 'Workflow orchestration']
  },
  {
    icon: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>',
    title: 'API-First Platform',
    description: 'RESTful APIs, webhooks, and SDKs for seamless integration with your existing tools.',
    image: 'https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?w=600&h=400&fit=crop',
    features: ['RESTful API', 'Webhooks', 'Python/Node SDKs']
  },
  {
    icon: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>',
    title: 'Compliance Automation',
    description: 'Built-in compliance frameworks for SOC2, ISO27001, HIPAA, PCI-DSS, and GDPR.',
    image: 'https://images.unsplash.com/photo-1450101499163-c8848c66ca85?w=600&h=400&fit=crop'
  },
  {
    icon: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M9 3v18m6-18v18M3 9h18M3 15h18"/></svg>',
    title: 'Multi-Tenancy',
    description: 'Manage multiple organizations with role-based access control and tenant isolation.',
    image: 'https://images.unsplash.com/photo-1551434678-e076c223a692?w=600&h=400&fit=crop'
  },
  {
    icon: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>',
    title: 'Threat Intelligence',
    description: 'Access to 200+ global threat feeds and our proprietary threat intelligence network.',
    image: 'https://images.unsplash.com/photo-1550751827-4bd374c3f58b?w=600&h=400&fit=crop',
    size: 'wide' as const
  },
  {
    icon: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>',
    title: 'On-Premise Option',
    description: 'Deploy in your own infrastructure for maximum control and data sovereignty.',
    image: 'https://images.unsplash.com/photo-1558494949-ef010cbdcc31?w=600&h=400&fit=crop'
  }
];

const techSpecs = [
  {
    title: 'Performance',
    specs: [
      { label: 'Event Processing', value: '1M+ events/sec' },
      { label: 'API Response Time', value: '<50ms' },
      { label: 'Detection Latency', value: '<100ms' },
      { label: 'Uptime SLA', value: '99.99%' }
    ]
  },
  {
    title: 'Scalability',
    specs: [
      { label: 'Max Endpoints', value: 'Unlimited' },
      { label: 'Data Retention', value: '13 months' },
      { label: 'Concurrent Users', value: '10,000+' },
      { label: 'API Rate Limit', value: '10K req/min' }
    ]
  },
  {
    title: 'Security',
    specs: [
      { label: 'Encryption', value: 'AES-256' },
      { label: 'Authentication', value: 'MFA + SSO' },
      { label: 'Certifications', value: 'SOC2, ISO27001' },
      { label: 'Backup', value: 'Hourly snapshots' }
    ]
  }
];

const codeExample = `// Initialize CyberSec Pro SDK
import { CyberSecPro } from '@cybersecpro/sdk';

const client = new CyberSecPro({
  apiKey: process.env.CYBERSEC_API_KEY,
  region: 'us-east-1'
});

// Query threats from last 24 hours
const threats = await client.threats.query({
  timeRange: '24h',
  severity: ['high', 'critical'],
  status: 'active'
});

// Automate response
threats.forEach(threat => {
  if (threat.confidence > 0.95) {
    client.response.isolateEndpoint(threat.deviceId);
    client.alerts.notify('security-team', threat);
  }
});

console.log(\`Isolated \${threats.length} high-confidence threats\`);`;

const comparisonData = {
  columns: [
    {
      name: 'CyberSec Pro',
      features: {
        aiDetection: true,
        automation: true,
        api: true,
        multiCloud: true,
        compliance: true,
        support: '24/7',
        sla: '99.99%',
        deployment: 'Cloud + On-Prem'
      }
    },
    {
      name: 'Competitor A',
      features: {
        aiDetection: true,
        automation: false,
        api: true,
        multiCloud: false,
        compliance: false,
        support: 'Business hours',
        sla: '99.9%',
        deployment: 'Cloud only'
      }
    },
    {
      name: 'Competitor B',
      features: {
        aiDetection: false,
        automation: true,
        api: false,
        multiCloud: true,
        compliance: true,
        support: '24/5',
        sla: '99.5%',
        deployment: 'On-Prem only'
      }
    }
  ],
  rows: [
    {
      category: 'Detection & Response',
      features: [
        { name: 'AI-Powered Detection', key: 'aiDetection' },
        { name: 'Automated Response', key: 'automation' }
      ]
    },
    {
      category: 'Platform',
      features: [
        { name: 'API Access', key: 'api' },
        { name: 'Multi-Cloud Support', key: 'multiCloud' },
        { name: 'Compliance Automation', key: 'compliance' }
      ]
    },
    {
      category: 'Support & SLA',
      features: [
        { name: 'Support Hours', key: 'support' },
        { name: 'Uptime SLA', key: 'sla' },
        { name: 'Deployment Options', key: 'deployment' }
      ]
    }
  ]
};
---

<BaseLayout title="Product Features | CyberSec Pro" description="Enterprise cybersecurity platform with AI-powered detection, automated response, and comprehensive API.">
  <Header client:load />
  <main style="padding-top: 72px;">
    <!-- Hero Section -->
    <section class="section" style="background: var(--gradient-hero);">
      <div class="container">
        <nav style="font-size: var(--text-sm); color: var(--color-text-muted); margin-bottom: var(--space-4);">
          <a href={`${BASE_URL}/`} style="color: var(--color-primary-500);">Home</a> / <span>Products</span>
        </nav>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-12); align-items: center;">
          <div>
            <h1 style="font-size: var(--text-6xl); font-weight: var(--font-extrabold); color: var(--color-text-primary); margin-bottom: var(--space-4); line-height: var(--leading-tight);">
              Enterprise Security <span style="background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Platform</span>
            </h1>
            <p style="font-size: var(--text-xl); color: var(--color-text-secondary); line-height: var(--leading-relaxed); margin-bottom: var(--space-6);">
              AI-powered threat detection, automated response, and comprehensive security analytics in one unified platform.
            </p>
            <div style="display: flex; gap: var(--space-4);">
              <a href={`${BASE_URL}/pricing/`} style="padding: var(--space-4) var(--space-6); background: var(--gradient-primary); color: white; border-radius: var(--radius-lg); font-weight: var(--font-semibold); box-shadow: var(--glow-button);">
                Start Free Trial
              </a>
              <a href={`${BASE_URL}/contact/`} style="padding: var(--space-4) var(--space-6); background: var(--color-bg-elevated); border: 1px solid var(--color-border-secondary); color: var(--color-text-primary); border-radius: var(--radius-lg); font-weight: var(--font-semibold);">
                Request Demo
              </a>
            </div>
          </div>
          <div style="border-radius: var(--radius-2xl); overflow: hidden; border: 1px solid var(--color-border-primary); box-shadow: var(--shadow-card-hover);">
            <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=600&h=400&fit=crop" alt="Product Dashboard" style="width: 100%; height: auto;" />
          </div>
        </div>
      </div>
    </section>

    <!-- Features Grid -->
    <section class="section">
      <div class="container">
        <h2 style="font-size: var(--text-4xl); font-weight: var(--font-bold); color: var(--color-text-primary); text-align: center; margin-bottom: var(--space-4);">
          8 Powerful Features
        </h2>
        <p style="font-size: var(--text-lg); color: var(--color-text-secondary); text-align: center; max-width: 600px; margin: 0 auto var(--space-12);">
          Everything you need to protect your organization in one integrated platform.
        </p>
        
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-6);">
          {features.map(feature => (
            <FeatureCardLarge {...feature} client:load />
          ))}
        </div>
      </div>
    </section>

    <!-- Technical Specs -->
    <section class="section" style="background: var(--color-bg-secondary);">
      <div class="container">
        <h2 style="font-size: var(--text-4xl); font-weight: var(--font-bold); color: var(--color-text-primary); text-align: center; margin-bottom: var(--space-12);">
          Technical Specifications
        </h2>
        
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-6);">
          {techSpecs.map(spec => (
            <TechSpecCard {...spec} client:load />
          ))}
        </div>
      </div>
    </section>

    <!-- API Showcase -->
    <section class="section">
      <div class="container">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-12); align-items: center;">
          <div>
            <h2 style="font-size: var(--text-4xl); font-weight: var(--font-bold); color: var(--color-text-primary); margin-bottom: var(--space-4);">
              Developer-Friendly API
            </h2>
            <p style="font-size: var(--text-lg); color: var(--color-text-secondary); line-height: var(--leading-relaxed); margin-bottom: var(--space-6);">
              RESTful API with comprehensive documentation, SDKs for Python, Node.js, Go, and Java. Webhooks for real-time event notifications.
            </p>
            <ul style="list-style: none; padding: 0; display: flex; flex-direction: column; gap: var(--space-3);">
              {['RESTful API with 200+ endpoints', 'Official SDKs (Python, Node, Go, Java)', 'Webhooks for real-time events', 'Rate limit: 10K requests/min', 'Comprehensive API docs'].map(item => (
                <li style="display: flex; gap: var(--space-2); align-items: center; color: var(--color-text-secondary);">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" style="color: var(--color-accent-500); flex-shrink: 0;">
                    <path d="M7 10l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="10" cy="10" r="9" stroke="currentColor" stroke-width="1.5"/>
                  </svg>
                  <span>{item}</span>
                </li>
              ))}
            </ul>
          </div>
          <div>
            <CodeBlock
              code={codeExample}
              language="javascript"
              title="threat-monitor.js"
              client:load
            />
          </div>
        </div>
      </div>
    </section>

    <!-- Comparison Table -->
    <section class="section" style="background: var(--color-bg-secondary);">
      <div class="container">
        <h2 style="font-size: var(--text-4xl); font-weight: var(--font-bold); color: var(--color-text-primary); text-align: center; margin-bottom: var(--space-4);">
          How We Compare
        </h2>
        <p style="font-size: var(--text-lg); color: var(--color-text-secondary); text-align: center; max-width: 600px; margin: 0 auto var(--space-12);">
          See how CyberSec Pro stacks up against the competition.
        </p>
        
        <ComparisonTable {...comparisonData} client:load />
      </div>
    </section>

    <!-- Integration Ecosystem -->
    <section class="section">
      <div class="container">
        <h2 style="font-size: var(--text-4xl); font-weight: var(--font-bold); color: var(--color-text-primary); text-align: center; margin-bottom: var(--space-4);">
          200+ Integrations
        </h2>
        <p style="font-size: var(--text-lg); color: var(--color-text-secondary); text-align: center; max-width: 600px; margin: 0 auto var(--space-12);">
          Connect with your existing security stack, cloud platforms, and business tools.
        </p>
        
        <div style="display: grid; grid-template-columns: repeat(6, 1fr); gap: var(--space-4);">
          {['Splunk', 'ServiceNow', 'Slack', 'AWS', 'Azure', 'GCP', 'Okta', 'Jira', 'PagerDuty', 'Datadog', 'Elastic', 'CrowdStrike'].map((name) => (
            <div style="padding: var(--space-4); background: var(--color-bg-card); border: 1px solid var(--color-border-primary); border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center;">
              <span style="font-size: var(--text-sm); font-weight: var(--font-semibold); color: var(--color-text-secondary);">{name}</span>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="section" style="background: var(--gradient-primary); text-align: center;">
      <div class="container">
        <h2 style="font-size: var(--text-4xl); font-weight: var(--font-bold); color: white; margin-bottom: var(--space-4);">
          See the Platform in Action
        </h2>
        <p style="font-size: var(--text-xl); color: rgba(255, 255, 255, 0.9); max-width: 600px; margin: 0 auto var(--space-8);">
          Request a personalized demo and discover how CyberSec Pro can protect your organization.
        </p>
        <div style="display: flex; gap: var(--space-4); justify-content: center; flex-wrap: wrap;">
          <a href={`${BASE_URL}/contact/`} style="padding: var(--space-4) var(--space-8); background: white; color: var(--color-primary-500); border-radius: var(--radius-lg); font-weight: var(--font-semibold); box-shadow: var(--shadow-xl);">
            Request Demo
          </a>
          <a href={`${BASE_URL}/pricing/`} style="padding: var(--space-4) var(--space-8); background: transparent; color: white; border: 2px solid white; border-radius: var(--radius-lg); font-weight: var(--font-semibold);">
            View Pricing
          </a>
        </div>
      </div>
    </section>
  </main>
  <Footer />
</BaseLayout>
